
<!DOCTYPE html>
{% load static %}

<html>
<head>


	<meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Realize</title>




	<!-- Jquery CDN -->
	 <script src="https://code.jquery.com/jquery-3.2.1.js" integrity="sha256-DZAnKJ/6XZ9si04Hgrsxu/8s717jcIzLy3oi35EouyE=" crossorigin="anonymous"></script>

	<!-- Boostrap 4 CDN  -->
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">

	<script src="https://cdn.jsdelivr.net/npm/geodesy@1.1.3/latlon-ellipsoidal.js"></script>





	<!-- FontAwesome CDN -->
	<script src="https://kit.fontawesome.com/a69cec9c91.js" crossorigin="anonymous"></script>
     <link rel="stylesheet" href="fontawesome/css/all.css">
     <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.css" rel="stylesheet" />


	<style>
	    #map {
	      height: 650px;
	      width: 100%;
	    }

	    #display-imoveis{
	    	display: none;
	    }

	    .custom-marker {
			  background-color: #00FF00; /* Cor de fundo desejada */
			  padding: 2px; /* Espaçamento interno desejado */
			  border-radius: 10%; /* Arredondamento desejado */
			  -webkit-box-shadow: 0px 13px 23px -6px rgba(0,0,0,1);
			  -moz-box-shadow: 0px 13px 23px -6px rgba(0,0,0,1);
			  box-shadow: 0px 13px 23px -6px rgba(0,0,0,1);
			  position:relative;
			  top:2em;
			  z-index:1;
			  border:1px solid black;


		}

    </style>




	<!-- CSS -->
	 <link rel="stylesheet" type="text/css" href="{% static 'css/estilo-index.css' %}">


	<!-- Java Script -->
	 <script type="text/javascript" src="scripts.js"></script>





</head>

<!-- Corpo do HTML -->
<body lang="pt-br" >




	<!-- Container -->
	<div class=" container container-fluid ">


		<!-- Header da Pagina -->
		<header id="header" class="bg-white  row  ">
			<!-- Imagem da Logo -->
			<img src="{% static 'img/logo-marca.png' %}" id="img-logo"  alt="Realize Seu Imóvel">



		</header>



		<!-- DISPLAY DE BUSCA -->
		<div id="display-busca" class="bg-white rounded mt-1">

			<!-- OPÇÃO DE BUSCA -->
			<div id="opcao-busca" class="p-2">
				<!-- BTN BUSCA POR MAPA -->
				<span id="btn-busca-mapa" class="btn btn-warning active" >Busca Mapa</span>
				<!-- BTN BUSCA POR MAPA -->
				<span id="btn-busca-display" class="btn btn-warning">Busca Display</span>
				<script type="text/javascript">
					$('#btn-busca-mapa').click(function(){
						$('#mapa-pesquisa').show();
						$('#display-imoveis').hide();
					});


					$('#btn-busca-display').click(function(){
						$('#mapa-pesquisa').hide();
						$('#display-imoveis').show();

					});
				</script>
			</div>

			<!--BARRA DE PESQUISA -->
		<div id="pesquisa" class="px-4 pb-1" >

				<form method="GET"  id="form-pesquisa"  class=" text-center form-inline m-0 p-0 ">



					<!--INPUT DA BARRA DE PESQUISA -->
					<input type="text" name="barra-pesquisa" id="barra-pesquisa" class="form-control  mr-1 col-9" placeholder="Pesquisar" value="" >


					<i class="fa fa-times-circle-o  btn    p-0 mr-3 " id="apagar-pesquisa" aria-hidden="true" style="font-size: 1.5em;"></i>
					<!--BTN PESQUISAR -->
					<button type="submit" id="btn-pesquisar" class=" btn btn-primary  ">
						<i class="fa fa-search"></i>
					</button>
					<div class="d-block col-10 border border-primary rounded">
						<div id="sugestoes-localidades" class="text-left "></div>
					</div>




					<script>



						$('#barra-pesquisa').focusin(function(){
							$(this).css({'min-width': '110%'});
							$('.fa-times-circle-o').hide();
							$('#btn-pesquisar').hide();

							setTimeout(() => {
							  	$(this).css({'min-width': '80%'});
								$('.fa-times-circle-o').show();
								$('#btn-pesquisar').show();
							}, "3000");




						});

						$('#barra-pesquisa').focusout(function(){
							$(this).css({'min-width': '80%'});
							$('.fa-times-circle-o').show();
							$('#btn-pesquisar').show();
						});


						$('#barra-pesquisa').keydown(function(){


							$(this).css({'min-width': '110%'});
							$('.fa-times-circle-o').hide();
							$('#btn-pesquisar').hide();



						});






























						$(document).on('click','#apagar-pesquisa', function(){
							//$('#barra-pesquisa').val('');
							location.href = 'http://127.0.0.1:8000/';
						});





					</script>


				</form>



		</div>


			<!-- MAPA PESQUISA -->
			<div id="mapa-pesquisa">

			  	<div id="map" class="rounded"></div>


			</div>

			<!-- DISPLAY IMOVEIS -->
			<div id="display-imoveis" class="border border-darka rounded row m-2 p-1 text-center ">
				<!-- HEADER DO DISPLAY -->
				<div class="col-12"><h3 class="text-center p-2">Destaques</h3></div>
				<!--DECK DO DISPLAY -->
				<div class="card-deck">
					<!-- CARD -->
					{% for listagem in listagem %}
					  <div class="card col-12 col-lg-4 col-md-4">
						<div id="caroussel" class="carousel slide" data-ride="carousel">
							   <div class="carousel-inner">
								   {% for carroussel_vinculado in carroussel_vinculado %}
										<div class="carousel-item {% if forloop.first %} active {% endif %}">
										  <img class="w-100 " src="{{carroussel_vinculado.imagens.url}}" alt="Slide 1">
										</div>
								   {% endfor %}
							   </div>
							   <a class="carousel-control-prev" href="#caroussel" role="button" data-slide="prev">
								<span class="carousel-control-prev-icon" aria-hidden="true"></span>
								<span class="sr-only">Previous</span>
							   </a>
							   <a class="carousel-control-next" href="#caroussel" role="button" data-slide="next">
								<span class="carousel-control-next-icon" aria-hidden="true"></span>
								<span class="sr-only">Next</span>
							   </a>
						</div>
						<div class="card-body">
						  <h5 class="card-title">{{listagem.nome_empreendimento|upper}}</h5>
						  <div id="lista-destaque">
							   {% for itens in itens %}
							  <span class="bg-warning p-1 rounded">{{itens.item_empreendimento}}</span>
							   {% endfor %}
						  </div>
						</div>
					  </div>
					{% endfor %}

				</div>







			</div>
			<!-- FECHA DISPLAY IMÓVEIS -->

		</div>





		<!-- CARROUSSEL -->
		<div class="p-3 mt-2">
			<div id="carousel" class="carousel slide" data-ride="carousel">
			  <ol class="carousel-indicators">
			    <li data-target="#carousel" data-slide-to="0" class="active"></li>
			    <li data-target="#carousel" data-slide-to="1"></li>
			    <li data-target="#carousel" data-slide-to="2"></li>
			  </ol>
			  <div class="carousel-inner">
			    <div class="carousel-item active">
			      <img class="d-block w-100" src="..." alt="First slide">
			    </div>
			    <div class="carousel-item">
			      <img class="d-block w-100" src="..." alt="Second slide">
			    </div>
			    <div class="carousel-item">
			      <img class="d-block w-100" src="..." alt="Third slide">
			    </div>
			  </div>
			  <a class="carousel-control-prev" href="#carousel" role="button" data-slide="prev">
			    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
			    <span class="sr-only">Previous</span>
			  </a>
			  <a class="carousel-control-next" href="#carousel" role="button" data-slide="next">
			    <span class="carousel-control-next-icon" aria-hidden="true"></span>
			    <span class="sr-only">Next</span>
			  </a>
			</div>

		</div>



		<!-- SOBRE NÓS -->
		<div id="sobre" class="p-3 mt-3 text-center">
			<h4 class="p-1">Sobre a Realize Seu Imóvel</h4>
			<p>Sabemos o quanto encontrar o imóvel perfeito pode parecer uma tarefa desafiadora. É por isso que estamos aqui para simplificar esse processo e transformar seu sonho em realidade.

			Nossa plataforma imobiliária está pronta para ajudá-lo(a) em todas as etapas do caminho. Vamos transformar  suas necessidades, desejos e preferências, e apresentar o imóvel ideal que atenda a todos os seus critérios.

			Não importa que esteja procurando uma casa espaçosa para sua família, um apartamento aconchegante no coração da cidade ou uma propriedade de luxo para investimento, estamos preparados para encontrar as melhores opções disponíveis.
			</p>
		</div>

		<!-- BTN WHATSAPP FLUTUANTE -->
		<div id="whatsapp-flutuante"  >
			<a href="https://wa.me/5516993379492?text=Acabei%20de%20%20ver%20a%20promoção%20Landing%20Page%20por%20R$%20299,90"  class="btn fa fa-whatsapp" id="btn-whatsapp-flutuante"></a>

		</div>



		<!-- RODAPÉ -->
		<footer class="text-center my-5" >
			<i class="fa fa-copyright" aria-hidden="true">Copyright</i>
			<div>Antherus - Desenvolvimento Web</div>
			<small><i class="fa fa-whatsapp mr-1" aria-hidden="true"></i><span>(16) 99337-9492</span></small>
		</footer>







	</div>
	<!-- FINAL CONTAINER -->







	<script>
	 var map;
	 var autocomplete;
	  function initMap() {
	  	  map = new google.maps.Map(document.getElementById('map'), {
			center: { lat: -21.7790843, lng: -48.1792643 },
			zoom: 12.8
		  });












		  {% for listagem in listagem %}

		     var address = '{{listagem.localizacao}}';


		     var geocoder = new google.maps.Geocoder();
		     geocoder.geocode({ address: address }, function(results, status) {

		     	if (status === google.maps.GeocoderStatus.OK) {
		     		var latitude = results[0].geometry.location.lat();
          			var longitude = results[0].geometry.location.lng();

          			var icon = {
						url: '{{listagem.logomarca_icone.url}}',
						scaledSize: new google.maps.Size(30, 30),

					  };

				  var label = {
						color: '#292b2c',
						fontWeight: '900',
						fontSize: '12px',
						text: '{{listagem.nome_empreendimento|upper}}',
						className: 'custom-marker btn',

				  }



				  var url = 'http://127.0.0.1:8000/{{listagem.slug}}/'


          			 // Adicione um marcador no local
					  var marker = new google.maps.Marker({
						position: { lat: latitude, lng: longitude },
						map: map,
						title: 'Clique para mais informações.',
						icon:icon,
						label: label,
						zIndex: 1

					  });

						// Monitorar o evento de mouseover (quando o mouse entra no marcador)
						google.maps.event.addListener(marker, 'mouseover', function() {
						  marker.setZIndex(1000); // Definir um z-index maior ao passar o mouse sobre o marcador
						  $('.custom-marker').setZIndex(1000);
						});

						// Monitorar o evento de mouseout (quando o mouse sai do marcador)
						google.maps.event.addListener(marker, 'mouseout', function() {
						  marker.setZIndex(1); // Restaurar o z-index original quando o mouse sai do marcador
						  $('.custom-marker').setZIndex(0);
						});

						// Monitorar o evento de click (quando o mouse sai do marcador)
						google.maps.event.addListener(marker, 'click', function() {
						   window.open(url,'_blank');
						});










		     	}else{
		     		var latitude = results[0].geometry.location.lat();
          			var longitude = results[0].geometry.location.lng();
          			alert(latitude)

		     	}




		     });



		  {% endfor %}






	  }

	  function geocodeAddress() {
		  var address = $('#barra-pesquisa').val();
		  var geocoder = new google.maps.Geocoder();
		  geocoder.geocode({ address: address }, function(results, status) {
		  //alert(results[0].geometry.location.lat())
			if (status === google.maps.GeocoderStatus.OK) {
			  var latitude = results[0].geometry.location.lat();
			  var longitude = results[0].geometry.location.lng();

			    // Criar objetos LatLon para ambas as localizações
				const araraquaraCoords = new LatLon(-21.7842, -48.1788);
				const otherCoords = new LatLon(latitude, longitude);

				// Calcular a distância entre as coordenadas em quilômetros
				const distanceInKilometers = araraquaraCoords.distanceTo(otherCoords);

				alert(`A distância até Araraquara é de aproximadamente ${distanceInKilometers.toFixed(2)} km.`);


			  map.setCenter({ lat: latitude, lng: longitude });

			  var marker = new google.maps.Marker({
				position: { lat: latitude, lng: longitude },
				map: map,
				title: address,
			  });
			} else {
			  $('#sugestoes-localidades').empty();
			}
		  });
	  }


	  // Função que será chamada no keyup do campo de pesquisa e também no clique do botão "Pesquisar"
    function onSearch() {
      geocodeAddress();

      setTimeout(function() {
        $('#barra-pesquisa').css({ 'min-width': '80%' });
        $('.fa-times-circle-o').show();
        $('#btn-pesquisar').show();
      }, 1000);
    }

    $(document).ready(function() {
      initMap();




		$('#barra-pesquisa').keyup(function() {
			onSearch();
			var input = $(this).val();

			// Criação do objeto de Autocompletar
			var autocompleteService = new google.maps.places.AutocompleteService();

			// Solicitar sugestões
			autocompleteService.getPlacePredictions({ input: input }, function(predictions, status) {
				if (status == google.maps.places.PlacesServiceStatus.OK) {
					// Limpar a lista de sugestões anteriores
					$('#sugestoes-localidades').empty();

					// Exibir as novas sugestões
					predictions.forEach(function(prediction) {
						if (prediction.description.includes('Araraquara - SP, Brasil')) {
							$('#sugestoes-localidades').append('<div class="prediction-description btn btn-light d-block text-left my-1">' + prediction.description + '</div>');
						}
					});
				}
			});
		});



	  $(document).on('click','.prediction-description',function(){
	  		escolha = $(this).text();
	  		$('#barra-pesquisa').val(escolha);
	  		$('#sugestoes-localidades').empty();

	  });










      // Evento do clique do botão "Pesquisar"
      $('#btn-pesquisar').click(function() {

      });
    });











	</script>
	 <!-- Inclua a API do Google Maps -->
	    <script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyA6EVGvxZFbZ1wg_5pP9onIn9FQeh1VBFY&callback=initMap&libraries=places""></script>





</body>
</html>